# RDisplay - Travel Data Visualization Application

## ðŸŽ¯ Project Overview

RDisplay is a modern React TypeScript application designed to visualize travel pricing data collected by the RScraper tool. The application provides an elegant, minimalist interface for exploring trip prices across different countries, destinations, departure airports, and participant counts.

## ðŸ—ï¸ Architecture

### Mono-Repository Structure
```
RScraper/
â”œâ”€â”€ RScraper/           # Existing Python scraper
â”œâ”€â”€ data/               # CSV files (auto-generated by scraper)
â”œâ”€â”€ sources.json        # Shared configuration
â”œâ”€â”€ RDisplay/           # NEW React TypeScript app
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â””â”€â”€ README.md           # Updated with deployment commands
```

### Technology Stack
- **Frontend Framework:** React 18 + TypeScript
- **Build Tool:** Vite (faster than Create React App)
- **UI Framework:** Material-UI (MUI) v5
- **Theme:** Dark Mode + Material Design
- **Deployment:** GitHub Pages (manual deployment)
- **Data Source:** Direct CSV file fetching from `/data/` folder

## ðŸŽ¨ User Interface Design

### Layout Structure
- **Desktop:** Left filter panel + Right data table
- **Mobile:** Hamburger menu (collapsible filters) + Full-width table
- **Theme:** Dark mode, minimalist, elegant Material Design

### Filter Panel (Left Side)
```
â”Œâ”€ Filters Panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Country: [Dropdown]             â”‚
â”‚ â—‹ Chiny                        â”‚
â”‚ â—‹ Indie                        â”‚
â”‚ â—‹ Hiszpania                    â”‚
â”‚ â—‹ Sri Lanka                    â”‚
â”‚ â—‹ Tunezja                      â”‚
â”‚                                â”‚
â”‚ Trip: [Dropdown]               â”‚
â”‚ â—‹ W miÅ‚osnych objÄ™ciach        â”‚
â”‚ â—‹ Chiny Cesarskie              â”‚
â”‚ â—‹ Wielobarwna Mozaika          â”‚
â”‚                                â”‚
â”‚ Departure Airport: [Dropdown]  â”‚
â”‚ â—‹ Katowice                     â”‚
â”‚ â—‹ Warszawa                     â”‚
â”‚ â—‹ RzeszÃ³w                      â”‚
â”‚                                â”‚
â”‚ Persons: [Radio Buttons]       â”‚
â”‚ â—‹ 1 person  â—‹ 2 persons       â”‚
â”‚ (Scalable for future: 3+)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Table (Right Side)
```
â”Œâ”€ Data Table â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Term          â”‚ 27.09 21:06 â”‚ 27.09 21:37 â”‚
â”‚ 08.01-19.01   â”‚ 7579        â”‚ 7579        â”‚
â”‚ 29.01-09.02   â”‚ 7415        â”‚ 7415        â”‚
â”‚ 19.02-02.03   â”‚ 7766        â”‚ 7766        â”‚
â”‚ 12.03-23.03   â”‚ 7734        â”‚ 7734        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ”„ Filter Logic & Data Flow

### Cascading Filter Behavior
1. **Country Selection** â†’ Filters available trips
2. **Trip Selection** â†’ Filters available departure airports
3. **Airport Selection** â†’ Filters available person counts
4. **Person Count Selection** â†’ Loads specific CSV file

### Smart Filter Validation
- **Disabled Options:** Gray out combinations where CSV files don't exist
- **Auto-Selection:** When only one option remains, auto-select it
- **Reset Cascade:** Changing higher-level filter resets lower-level selections

### Filter State Management
```typescript
interface FilterState {
  country: string | null;
  trip: string | null;
  departureAirport: string | null;
  persons: number | null;
}

// Reset behavior:
// Country change â†’ reset trip, airport, persons
// Trip change â†’ reset airport, persons
// Airport change â†’ reset persons
```

## ðŸ“ File Naming Convention

Based on `config_manager.py` transliteration logic:

### Original â†’ CSV Filename Mapping
```typescript
// Example transformations:
"HiszpaÅ„skie El Clasico" â†’ "Hiszpanskie_El_Clasico"
"W miÅ‚osnych objÄ™ciach" â†’ "W_milosnych_objeciach"
"Katowice" â†’ "Katowice"

// Final filename pattern:
"{Country}__{Trip_Name}__{Departure_Airport}__{X}os.csv"

// Real example:
"Indie__W_milosnych_objeciach__Katowice__2os.csv"
```

### Polish Character Transliteration
```typescript
const polishChars = {
  'Ä…': 'a', 'Ä‡': 'c', 'Ä™': 'e', 'Å‚': 'l', 'Å„': 'n',
  'Ã³': 'o', 'Å›': 's', 'Åº': 'z', 'Å¼': 'z',
  'Ä„': 'A', 'Ä†': 'C', 'Ä˜': 'E', 'Å': 'L', 'Åƒ': 'N',
  'Ã“': 'O', 'Åš': 'S', 'Å¹': 'Z', 'Å»': 'Z'
};
// Spaces â†’ underscores
```

## ðŸ“Š Data Processing

### CSV File Structure
```csv
,27.09.2025 21:06:59,27.09.2025 21:37:41
08.01 - 19.01,7579,7579
29.01 - 09.02,7415,7415
19.02 - 02.03,7766,7766
12.03 - 23.03,7734,7734
```

### Date Handling Logic
- **Format:** `dd.mm - dd.mm` (date ranges without year)
- **Year Assignment:** Smart logic based on current date
  - If date appears to be in the past â†’ assign next year
  - Otherwise â†’ assign current year
- **Sorting:** Chronological order starting from nearest future date
- **Filtering:** Hide trips that have already started (based on start date)

### Column Filtering
- **Hide Past Columns:** If timestamp represents past data only, hide entire column
- **Show Active Columns:** Only display timestamps with future trip data
- **Price Display:** Format numbers with proper thousand separators

## ðŸ”— Data Sources Integration

### Sources.json Structure
```json
{
  "trips": {
    "Trip Name": {
      "country": "Country Name",
      "departure_locations": ["Airport1", "Airport2"],
      "base_url": "..."
    }
  },
  "defaults": {
    "departure_locations": ["Katowice"],
    "person_counts": [1, 2]
  }
}
```

### Available Options Discovery
```typescript
// Dynamic option generation based on sources.json + existing CSV files
const getAvailableOptions = () => {
  const countries = extractCountriesFromSources();
  const trips = filterTripsByCountry(selectedCountry);
  const airports = filterAirportsByTrip(selectedTrip);
  const persons = filterPersonsByExistingFiles(selectedCountry, selectedTrip, selectedAirport);
}
```

## ðŸš€ Deployment Strategy

### Manual GitHub Pages Deployment
```bash
# Commands to be added to README.md
cd RDisplay
npm install
npm run build
npm run deploy  # Deploys to gh-pages branch
```

### Target URL
- **Production:** `https://filipbiernat.github.io/RDisplay`
- **Data Loading:** Direct fetch from GitHub repo's `/data/` folder

### Build Configuration
```typescript
// vite.config.ts
export default {
  base: '/RDisplay/',
  build: {
    outDir: 'dist'
  }
}
```

## ðŸ“± Responsive Design

### Desktop (â‰¥768px)
- Left sidebar: 300px fixed width filter panel
- Right content: Flexible width data table
- Material-UI AppBar with title

### Mobile (<768px)
- Hamburger menu icon in AppBar
- Collapsible drawer for filters
- Full-width data table with horizontal scroll
- Touch-friendly filter controls

### Tablet (768px-1024px)
- Adaptive layout switching at breakpoint
- Optimized touch targets
- Collapsible sidebar option

## ðŸ› ï¸ Technical Implementation Details

### Component Structure
```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ FilterPanel/
â”‚   â”‚   â”œâ”€â”€ CountrySelector.tsx
â”‚   â”‚   â”œâ”€â”€ TripSelector.tsx
â”‚   â”‚   â”œâ”€â”€ AirportSelector.tsx
â”‚   â”‚   â””â”€â”€ PersonSelector.tsx
â”‚   â”œâ”€â”€ DataTable/
â”‚   â”‚   â”œâ”€â”€ TripTable.tsx
â”‚   â”‚   â””â”€â”€ PriceCell.tsx
â”‚   â””â”€â”€ Layout/
â”‚       â”œâ”€â”€ AppLayout.tsx
â”‚       â””â”€â”€ MobileDrawer.tsx
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ filters.ts
â”‚   â”œâ”€â”€ sources.ts
â”‚   â””â”€â”€ csvData.ts
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ csvParser.ts
â”‚   â”œâ”€â”€ fileNameBuilder.ts
â”‚   â”œâ”€â”€ dateUtils.ts
â”‚   â””â”€â”€ transliteration.ts
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useFilters.ts
â”‚   â”œâ”€â”€ useCsvData.ts
â”‚   â””â”€â”€ useAvailableOptions.ts
â””â”€â”€ App.tsx
```

### Key Features Implementation
1. **Smart Filter Cascading:** useEffect chains with dependency arrays
2. **CSV Loading:** Fetch API with error handling and loading states
3. **Date Processing:** Custom date parsing and year assignment logic
4. **File Validation:** Check CSV existence before allowing selection
5. **Responsive Design:** Material-UI breakpoints and useMediaQuery
6. **Dark Theme:** MUI ThemeProvider with custom dark palette

### Error Handling
- **Missing CSV Files:** Graceful degradation, disabled filter options
- **Network Errors:** Retry logic with user feedback
- **Invalid Data:** Fallback to empty state with error message
- **Loading States:** Skeleton loaders and progress indicators

### Performance Optimizations
- **Memoization:** React.memo for expensive components
- **Lazy Loading:** Dynamic imports for large components
- **CSV Caching:** Store parsed data to avoid re-fetching
- **Debounced Filtering:** Prevent excessive re-renders

## ðŸ“‹ Development Roadmap

### Phase 1: Core Setup âœ…
- [x] Project structure planning
- [x] Vite + React + TypeScript setup
- [x] Material-UI integration
- [x] Basic layout structure

### Phase 2: Data Integration âœ…
- [x] Sources.json parser
- [x] CSV file loader
- [x] File name mapping logic
- [x] Date processing utilities

### Phase 3: UI Components âœ…
- [x] Filter panel components
- [x] Data table implementation
- [x] Responsive layout
- [x] Dark theme styling

### Phase 4: Smart Logic âœ…
- [x] Cascading filter system
- [x] Available options discovery
- [x] Auto-selection logic
- [x] Error handling

### Phase 5: Polish & Deploy âœ…
- [x] Mobile responsiveness
- [x] Performance optimization
- [x] GitHub Pages setup
- [x] Documentation updates

## ðŸŽ¯ Success Criteria

### Functional Requirements
- âœ… Display travel pricing data from CSV files
- âœ… Smart filter system preventing invalid combinations
- âœ… Responsive design working on all devices
- âœ… Dark mode Material Design aesthetic
- âœ… Auto-hide past trips and empty columns
- âœ… Chronological sorting of future trips

### Technical Requirements
- âœ… TypeScript for type safety
- âœ… React 18 with modern hooks
- âœ… Material-UI v5 components
- âœ… Vite for fast development
- âœ… GitHub Pages deployment
- âœ… English-only codebase

### User Experience Requirements
- âœ… Intuitive filter interaction
- âœ… Fast data loading
- âœ… Clear error messaging
- âœ… Mobile-friendly interface
- âœ… Professional appearance

---

## ðŸ“ Notes

- **Language:** All code, comments, and variables in English
- **Scalability:** Code prepared for additional person count options
- **Maintainability:** Clean component structure with separation of concerns
- **Future Features:** Foundation ready for price change charts (Phase 6)

**Status:** âœ… **COMPLETED** - Full implementation finished! ðŸŽ‰

**Live Development Server:** http://localhost:5173/RDisplay/
**Production Deployment:** Ready for `npm run deploy`